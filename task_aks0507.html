root@myVM:/home/azureuser# ansible-playbook main.yml --extra-vars "{\"test\":\"test.yml\",\"resource_group\":\"ansible-aks-test\"}"
 [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost
does not match 'all'


PLAY [localhost] *******************************************************************************************

TASK [Gathering Facts] *************************************************************************************
ok: [localhost]

TASK [create resource group] *******************************************************************************
ok: [localhost]

TASK [include_tasks] ***************************************************************************************
included: /home/azureuser/test.yml for localhost

TASK [set_fact] ********************************************************************************************
ok: [localhost]

TASK [Find available k8s version] **************************************************************************
 [WARNING]: Azure API profile latest does not define an entry for ContainerServiceClient

ok: [localhost]

TASK [Create an AKS instance (check mode)] *****************************************************************
changed: [localhost]

TASK [Check there is no AKS created] ***********************************************************************
ok: [localhost]

TASK [Check there is no AKS created] ***********************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Create an AKS instance] ******************************************************************************
changed: [localhost]

TASK [Assert the AKS instance is well created] *************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Get AKS fact] ****************************************************************************************
ok: [localhost]

TASK [Assert fact returns the created one] *****************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Create an AKS instance (idempotent)] *****************************************************************
ok: [localhost]

TASK [Assert idempotent] ***********************************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Get available version] *******************************************************************************
ok: [localhost]

TASK [Upgrade the AKS instance with addon] *****************************************************************
changed: [localhost]

TASK [Assert the AKS instance is upgraded] *****************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Upgrade the AKS instance with addon (idempontent)] ***************************************************
ok: [localhost]

TASK [assert] **********************************************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Get AKS fact] ****************************************************************************************
ok: [localhost]

TASK [Assert fact returns the created one] *****************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Delete the AKS instance] *****************************************************************************
changed: [localhost]

TASK [Assert the AKS instance is well deleted] *************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Delete the AKS instance (idempotent)] ****************************************************************
ok: [localhost]

TASK [Assert idempotent] ***********************************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

TASK [Get AKS fact] ****************************************************************************************
ok: [localhost]

TASK [Assert fact returns empty] ***************************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

PLAY RECAP *************************************************************************************************
localhost                  : ok=27   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

